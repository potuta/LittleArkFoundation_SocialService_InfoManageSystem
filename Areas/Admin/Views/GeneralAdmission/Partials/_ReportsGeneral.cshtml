@model LittleArkFoundation.Areas.Admin.Models.GeneralAdmission.GeneralAdmissionViewModel
@{
    // Unique MSWs
    var msws = Model.Users.Select(u => u.Username).Distinct().ToList();

    // Group discharges by ProcessedDate
    var grouped = Model.GeneralAdmissions
        .GroupBy(d => d.Date)
        .OrderBy(g => g.Key)
        .ToList();
    var mswTotals = msws.ToDictionary(msw => msw, msw => Model.GeneralAdmissions.Count(d => d.MSW == msw));
    var overallTotal = Model.GeneralAdmissions.Count;

    var groupedClass = new List<string>
    {
        "A", "B", "C1", "C2", "C3", "D"
    };

    var groupedByClass = Model.GeneralAdmissions
        .Where(d => !string.IsNullOrEmpty(d.Class))
        .GroupBy(d => d.Class)
        .ToDictionary(g => g.Key, g => g.ToList());

    var classTotals = msws.ToDictionary(msw => msw, msw => Model.GeneralAdmissions.Count(d => d.MSW == msw));
    var overallClassTotal = Model.GeneralAdmissions.Count;
}

<h5 style="margin-top: 15px;">COUNTA of Date Processed by MSW</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Date Processed</th>
                        @foreach (var msw in msws)
                        {
                            <th>@msw</th>
                        }
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    @foreach (var group in grouped)
                    {
                        <tr>
                            <td>@group.Key.ToShortDateString()</td>

                            @foreach (var msw in msws)
                            {
                                var count = group.Count(d => d.MSW == msw);
                                <td>@count</td>
                            }

                            <td>@group.Count()</td>
                        </tr>
                    }

                    <tr class="fw-bold">
                        <td>Total</td>
                        @foreach (var msw in msws)
                        {
                            <td>@mswTotals[msw]</td>
                        }
                        <td>@overallTotal</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Class</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Class</th>
                        @foreach (var msw in msws)
                        {
                            <th>@msw</th>
                        }
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    @foreach (var cls in groupedClass)
                    {
                        <tr>
                            <td>@cls</td>

                            @foreach (var msw in msws)
                            {
                                var count = groupedByClass.ContainsKey(cls)
                                ? groupedByClass[cls].Count(d => d.MSW == msw)
                                : 0;
                                <td>@count</td>
                            }

                            <td>
                                @(groupedByClass.ContainsKey(cls) ? groupedByClass[cls].Count : 0)
                            </td>
                        </tr>
                    }

                    <tr class="fw-bold">
                        <td>Total</td>
                        @foreach (var msw in msws)
                        {
                            <td>@classTotals[msw]</td>
                        }
                        <td>@overallClassTotal</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Class by Gender</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Class</th>
                        <th>F</th>
                        <th>M</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    foreach (var cls in groupedClass)
                    {
                        var femaleCount = Model.GeneralAdmissions.Count(d => d.Class == cls && d.Gender == "Female");
                        var maleCount = Model.GeneralAdmissions.Count(d => d.Class == cls && d.Gender == "Male");
                        <tr>
                            <td>@cls</td>
                            <td>@femaleCount</td>
                            <td>@maleCount</td>
                            @* <td>@Model.OPDList.Count(d => d.Class == cls)</td> *@
                            <td>@(femaleCount + maleCount)</td>
                        </tr>
                    }

                    var femaleCountAll = Model.GeneralAdmissions.Count(d => d.Gender == "Female");
                    var maleCountAll = Model.GeneralAdmissions.Count(d => d.Gender == "Male");
                    var totalCountAll = femaleCountAll + maleCountAll;
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@femaleCountAll</td>
                        <td>@maleCountAll</td>
                        <td>@totalCountAll</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@* <h5 style="margin-top: 15px;">COUNTA of Old/New</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>MSW</th>
                        <th>Old</th>
                        <th>New</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    @foreach (var msw in msws)
                    {
                        var oldCount = Model.GeneralAdmissions.Count(d => d.isOld == true && d.MSW == msw);
                        var newCount = Model.GeneralAdmissions.Count(d => d.isOld == false && d.MSW == msw);
                        var totalCount = oldCount + newCount;
                        <tr>
                            <td>@msw</td>
                            <td>@oldCount</td>
                            <td>@newCount</td>
                            <td>@totalCount</td>
                        </tr>
                    }

                    var oldCountAll = Model.GeneralAdmissions.Count(d => d.isOld == true);
                    var newCountAll = Model.GeneralAdmissions.Count(d => d.isOld == false);
                    var totalCountAll = oldCountAll + newCountAll;
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@oldCountAll</td>
                        <td>@newCountAll</td>
                        <td>@totalCountAll</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of PWD</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>MSW</th>
                        <th>PWD</th>
                        <th>Non-PWD</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    @foreach (var msw in msws)
                    {
                        var pwdCount = Model.GeneralAdmissions.Count(d => d.isPWD == true && d.MSW == msw);
                        var nonPwdCount = Model.GeneralAdmissions.Count(d => d.isPWD == false && d.MSW == msw);
                        var totalCount = pwdCount + nonPwdCount;
                        <tr>
                            <td>@msw</td>
                            <td>@pwdCount</td>
                            <td>@nonPwdCount</td>
                            <td>@totalCount</td>
                        </tr>
                    }
                    var pwdCountAll = Model.GeneralAdmissions.Count(d => d.isPWD == true);
                    var nonPwdCountAll = Model.GeneralAdmissions.Count(d => d.isPWD == false);
                    var totalCountAll = pwdCountAll + nonPwdCountAll;
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@pwdCountAll</td>
                        <td>@nonPwdCountAll</td>
                        <td>@totalCountAll</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div> *@

<h5 style="margin-top: 15px;">COUNTA of Eco. Stat</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Eco. Stat</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    var economicStatuses = new[] { "C", "I", "J", "R" };
                    int totalCount = 0;
                    @foreach (var eco in economicStatuses)
                    {
                        <tr>
                            <td>@eco</td>
                            <td>@Model.GeneralAdmissions.Count(d => d.EconomicStatus.ToUpper() == eco.ToUpper())</td>
                        </tr>
                        totalCount += Model.GeneralAdmissions.Count(d => d.EconomicStatus.ToUpper() == eco.ToUpper());
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of M. Stat</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>M. Stat</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    var statuses = new[] { "LI", "LM", "S", "W" };
                    int totalCount = 0;
                    @foreach (var stats in statuses)
                    {
                        <tr>
                            <td>@stats</td>
                            <td>@Model.GeneralAdmissions.Count(d => d.MaritalStatus.ToUpper() == stats.ToUpper())</td>
                        </tr>
                        totalCount += Model.GeneralAdmissions.Count(d => d.MaritalStatus.ToUpper() == stats.ToUpper());
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Referral</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Referral</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    var statuses = new[] { "Clinic/Private", "Govt. Agencies", "Govt. Hosp.", "HCT",
                                "NGOs", "Others", "Walk in"};
                    int totalCount = 0;
                    @foreach (var stats in statuses)
                    {
                        <tr>
                            <td>@stats</td>
                            <td>@Model.GeneralAdmissions.Count(d => d.Referral.ToUpper() == stats.ToUpper())</td>
                        </tr>
                        totalCount += Model.GeneralAdmissions.Count(d => d.Referral.ToUpper() == stats.ToUpper());
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Origin</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Origin</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    @* var statuses = new[] {
						"ABRA", "AGUSAN DEL NORTE", "AGUSAN DEL SUR", "AKLAN", "ALBAY", "ANTIQUE", "APAYAO",
                                "AURORA", "BAGUIO", "BASILAN", "BATAAN", "BATANES", "BATANGAS", "BENGUET", "BILIRAN", "BOHOL", "BUKIDNON",
								"BULACAN", "BUTUAN", "CAGAYAN", "CAGAYAN DE ORO", "CALOOCAN", "CAMARINES NORTE", "CAMARINES SUR", "CAMIGUIN",
								"CAPIZ", "CATANDUANES", "CAVITE", "CEBU", "COMPOSTELA VALLEY", "COTABATO", "DAVAO", "EASTERN SAMAR", "GENERAL SANTOS",
                                "GUIMARAS", "IFUGAO", "ILIGAN", "ILOCOS NORTE", "ILOCOS SUR", "ILOILO", "ISABELA", "KALINGA", "LA UNION", "LAGUNA", "LEYTE", "MAGUINDANAO",
                    }; *@
                    var groupedOrigins = Model.GeneralAdmissions
                    .Where(g => !string.IsNullOrWhiteSpace(g.Origin))
                    .GroupBy(g => g.Origin.Trim().ToUpper())
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedOrigins)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Age</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Age</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedAge = Model.GeneralAdmissions
                    .GroupBy(g => g.Age)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedAge)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Patient Educ.</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Patient</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.EducationalAttainment)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Father Educ.</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Father</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.FatherEducationalAttainment)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Mother Educ.</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Mother</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.MotherEducationalAttainment)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Old/New</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Old/New</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    <tr>
                        <td>New</td>
                        <td>@Model.GeneralAdmissions.Count(g => !g.isOld)</td>
                    </tr>

                    <tr>
                        <td>Old</td>
                        <td>@Model.GeneralAdmissions.Count(g => g.isOld)</td>
                    </tr>

                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@Model.GeneralAdmissions.Count()</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of PWD</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>PWD</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {
                    <tr>
                        <td>No</td>
                        <td>@Model.GeneralAdmissions.Count(g => !g.isPWD)</td>
                    </tr>

                    <tr>
                        <td>Yes</td>
                        <td>@Model.GeneralAdmissions.Count(g => g.isPWD)</td>
                    </tr>

                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@Model.GeneralAdmissions.Count()</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of HH Size</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>HH Size</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.HouseholdSize)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Light</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Light</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.LightSource)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Water</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Water</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.WaterSource)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Fuel</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Fuel</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.FuelSource)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Dwell</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Dwell</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.DwellingType)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Stat's Occupation</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Stat's Occupation</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.StatsOccupation)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Income Range</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Income Range</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.IncomeRange)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Occupation</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Occupation</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.Occupation)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<h5 style="margin-top: 15px;">COUNTA of Monthly Income</h5>
<div class="container-fluid px-0 mx-0" style="max-width: 1600px;">
    <div class="table-responsive" style="overflow-x: auto;">
        <table class="table" style="min-width: 1200px;">
            <thead>
                @if (Model != null)
                {
                    <tr>
                        <th>Monthly Income</th>
                        <th>Grand Total</th>
                    </tr>
                }
            </thead>
            <tbody>
                @if (Model != null)
                {

                    var groupedPatient = Model.GeneralAdmissions
                    .GroupBy(g => g.MonthlyIncome)
                    .OrderBy(g => g.Key)
                    .ToList();

                    int totalCount = 0;
                    @foreach (var group in groupedPatient)
                    {
                        <tr>
                            <td>@group.Key</td>
                            <td>@group.Count()</td>
                        </tr>
                        totalCount += group.Count();
                    }
                    <tr class="fw-bold">
                        <td>Total</td>
                        <td>@totalCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

